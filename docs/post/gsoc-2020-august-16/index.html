<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta property="og:title" content=" And then there were tests &middot;  @mayukhdeb" />
  <meta property="og:site_name" content="@mayukhdeb" />
  <meta property="og:url" content="https://mayukhdeb.github.io/blog/post/gsoc-2020-august-16/" />
  <meta name="theme" content="darksimplicity">
  <meta name="generator" content="Hugo 0.74.3" />
  
  
  <base href="https://mayukhdeb.github.io/blog/">
  <title> And then there were tests &middot;  @mayukhdeb</title>
  <link rel="stylesheet" href="https://mayukhdeb.github.io/blog/css/style.min.css">

</head>
<body>
  <header>
      <nav role="top-nav">
          <ul class="navbar-list">
            
            <li class="navbar-item"><a class="navbar-link" href="https://github.com/Mayukhdeb">Github</a></li>
            <li class="navbar-item"><a class="navbar-link" href="https://twitter.com/mayukh091">Twitter</a></li>
          </ul>
      </nav>
      <br />
      <h1><a href="https://mayukhdeb.github.io/blog/" class="title">@mayukhdeb</a>
        
      </h1>
  </header>
  <main>
      <article itemscope itemtype="http://schema.org/Blog">
        <h3><a class="post-title-link" href="https://mayukhdeb.github.io/blog/post/gsoc-2020-august-16/">And then there were tests</a></h3>
        
            <div class="tags">tags: &nbsp;
              <span itemprop="keywords"><a class="tag-link" href="https://mayukhdeb.github.io/blog/tags/gsoc" rel="tag">GSoC </a><a class="tag-link" href="https://mayukhdeb.github.io/blog/tags/openworm" rel="tag">OpenWorm </a><a class="tag-link" href="https://mayukhdeb.github.io/blog/tags/travis" rel="tag">Travis </a><a class="tag-link" href="https://mayukhdeb.github.io/blog/tags/tests" rel="tag">Tests </a>
              </span>
          </div>
          <div class="content-full"><p>Setting up <a href="https://github.com/DevoLearn/devolearn/blob/master/devolearn/tests/test.py">unit tests for devolearn</a> was actually the first time that I was ever touching those testing libraries. While setting up the tests, <a href="https://realpython.com/python-testing/">this</a> came to be the most useful resource I found.</p>
<h2 id="why-do-we-even-need-tests-">Why do we even need tests ?</h2>
<p>It is safe to assume that one day more contributors would come to <a href="https://github.com/DevoLearn/devolearn">devolearn</a>. When a future contributor makes a pull request, these tests would make sure that the pull requests are not breaking the code, and the tests would work as an early warning system if a pull request does break the code.</p>
<p>In our case, we used <a href="https://travis-ci.org/">travis CI</a> to run our tests online after each push/pull request. For this we had to set up a <code>.travis.yml</code> file on the same diirectory as the <code>setup.py</code>.</p>
<p>A <code>.travis.yml</code> file looks like:</p>
<pre><code>language: python
python:
  - &quot;3.7&quot;
  - &quot;3.8&quot;

dist: bionic

install: 
  - pip install .
  - pip install -r requirements.txt
script:  
  - python setup.py test 

</code></pre><p>I will break down the file bit by bit:</p>
<ul>
<li>
<p><code>language: python</code> : Because we&rsquo;ll be running the tests on python.</p>
</li>
<li>
<p><code>python:</code> This section specifies the versions of python on which we&rsquo;ll be running the tests.</p>
</li>
<li>
<p><code>install:</code> Specifies the terminal commands one would need to run in order to install the required libraries.</p>
</li>
<li>
<p><code>script:</code> Specifies the terminal command(s) needed to run the test(s).</p>
</li>
</ul>
<p>On top of that, I had to add this to the <code>setup()</code> function in <code>setup.py</code>:</p>
<pre><code>test_suite='nose.collector',
tests_require=['nose']
</code></pre><p>And as for the test functions themselves, the were pretty easy to set up. It was as simple as calling all the functions within a subclass of <code>unittest.TestCase</code>. One of the tests in the devolearn unit tests looks like as follows:</p>
<pre><code>centroid_df = segmentor.predict_from_video(&lt;args&gt;)

self.assertTrue(isinstance(centroid_df, pd.DataFrame), &quot;should be a pandas.DataFrame&quot;)
</code></pre><p>The snippet above makes sure that the object returned from the function <code>predict_from_video()</code> is a <code>pandas.DataFrame</code>. If something ever breaks in between, then this test would fail with the message in the 2nd arg of <code>self.assertTrue</code>.</p>
<p>After about an hour worth of errors and debugging, I was finally able to make this <a href="https://api.travis-ci.org/DevoLearn/devolearn.svg?branch=master&amp;status=passed">weird flex</a> on the readme.</p>

</div>
      </article>
  </main>
  <footer>
      <div class="copyright"><p>

&copy; 2020. 

@mayukhdeb. All rights reserved. 

</div>    



  </footer>

<body>
</body>

</html>

